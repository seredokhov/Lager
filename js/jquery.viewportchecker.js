(function(c){c.fn.viewportChecker=function(m){var e={classToAdd:'visible',classToRemove:'invisible',classToAddForFullView:'full-visible',removeClassAfterAnimation:false,offset:100,repeat:false,invertBottomOffset:true,callbackFunction:function(a,b){},scrollHorizontal:false,scrollBox:window};c.extend(e,m);var k=this,g={height:c(e.scrollBox).height(),width:c(e.scrollBox).width()};this.checkElements=function(){var f,h;if(!e.scrollHorizontal){f=Math.max(c('html').scrollTop(),c('body').scrollTop(),c(window).scrollTop());h=(f+g.height)}else{f=Math.max(c('html').scrollLeft(),c('body').scrollLeft(),c(window).scrollLeft());h=(f+g.width)}k.each(function(){var a=c(this),b={},d={};if(a.data('vp-add-class'))d.classToAdd=a.data('vp-add-class');if(a.data('vp-remove-class'))d.classToRemove=a.data('vp-remove-class');if(a.data('vp-add-class-full-view'))d.classToAddForFullView=a.data('vp-add-class-full-view');if(a.data('vp-keep-add-class'))d.removeClassAfterAnimation=a.data('vp-remove-after-animation');if(a.data('vp-offset'))d.offset=a.data('vp-offset');if(a.data('vp-repeat'))d.repeat=a.data('vp-repeat');if(a.data('vp-scrollHorizontal'))d.scrollHorizontal=a.data('vp-scrollHorizontal');if(a.data('vp-invertBottomOffset'))d.scrollHorizontal=a.data('vp-invertBottomOffset');c.extend(b,e);c.extend(b,d);if(a.data('vp-animated')&&!b.repeat){return}if(String(b.offset).indexOf("%")>0)b.offset=(parseInt(b.offset)/100)*g.height;var i=(!b.scrollHorizontal)?a.offset().top:a.offset().left,n=(!b.scrollHorizontal)?i+a.height():i+a.width();var j=Math.round(i)+b.offset,l=(!b.scrollHorizontal)?j+a.height():j+a.width();if(b.invertBottomOffset)l-=(b.offset*2);if((j<h)&&(l>f)){a.removeClass(b.classToRemove);a.addClass(b.classToAdd);b.callbackFunction(a,"add");if(n<=h&&i>=f)a.addClass(b.classToAddForFullView);else a.removeClass(b.classToAddForFullView);a.data('vp-animated',true);if(b.removeClassAfterAnimation){a.one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend',function(){a.removeClass(b.classToAdd)})}}else if(a.hasClass(b.classToAdd)&&(b.repeat)){a.removeClass(b.classToAdd+" "+b.classToAddForFullView);b.callbackFunction(a,"remove");a.data('vp-animated',false)}})};if('ontouchstart'in window||'onmsgesturechange'in window){c(document).bind("touchmove MSPointerMove pointermove",this.checkElements)}c(e.scrollBox).bind("load scroll",this.checkElements);c(window).resize(function(a){g={height:c(e.scrollBox).height(),width:c(e.scrollBox).width()};k.checkElements()});this.checkElements();return this}})(jQuery);